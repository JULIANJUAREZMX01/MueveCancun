---
const pathname = Astro.url.pathname;

const navItems = [
  { href: '/home', icon: 'explore', label: 'Inicio', activePattern: /^\/home/ },
  { href: '/rutas', icon: 'route', label: 'Rutas', activePattern: /^\/rutas/ },
  { href: '/mapa', icon: 'map', label: 'Mapa', activePattern: /^\/mapa/ },
  { href: '/wallet', icon: 'account_balance_wallet', label: 'Tarjeta', activePattern: /^\/wallet/ },
  { href: '/community', icon: 'groups', label: 'Comunidad', activePattern: /^\/community/ },
];
---

<nav transition:persist
     class="fixed bottom-0 left-0 right-0 z-50 safe-area-bottom"
     style="background: var(--surface-card); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border-top: 1px solid var(--border-light);">
  <div class="grid grid-cols-5 h-16 max-w-lg mx-auto">
    {navItems.map((item) => {
      const isActive = item.activePattern.test(pathname);
      return (
        <a
          href={item.href}
          class:list={[
            'flex flex-col items-center justify-center gap-0.5 transition-all no-underline relative group',
            isActive ? 'text-primary-500' : 'text-slate-400 dark:text-slate-500'
          ]}
        >
          {/* Active indicator dot */}
          {isActive && (
            <div class="absolute -top-px left-1/2 -translate-x-1/2 w-5 h-0.5 rounded-full bg-primary-500 animate-scale-in"></div>
          )}

          <span
            class:list={[
              'material-symbols-rounded text-2xl transition-all',
              isActive ? 'scale-105' : 'group-hover:scale-105 group-active:scale-95'
            ]}
            style={isActive ? "font-variation-settings: 'FILL' 1;" : "font-variation-settings: 'FILL' 0;"}
          >{item.icon}</span>

          <span class:list={[
            'text-xxs font-bold tracking-wide transition-colors',
            isActive ? 'text-primary-600 dark:text-primary-400' : ''
          ]}>
            {item.label}
          </span>
        </a>
      );
    })}
  </div>
</nav>
