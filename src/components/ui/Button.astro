---
interface Props {
  variant?: 'primary' | 'ghost' | 'danger' | 'secondary';
  type?: 'button' | 'submit' | 'reset';
  id?: string;
  class?: string;
  disabled?: boolean;
}

const { variant = 'primary', type = 'button', id, class: className, disabled = false } = Astro.props;
---

<button
  type={type}
  id={id}
  class={`graffiti-btn ${className || ''}`}
  disabled={disabled}
  data-variant={variant}
>
  <slot />
</button>

<style>
  /*
   * GRAFFITI WARRIOR: CSS5 LOGIC
   * Pure CSS Variables & Nesting with Global Tropical Tokens
   */
  .graffiti-btn {
    /* Layout & Box Model */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    min-height: 44px;
    padding: 0.75rem 1.5rem; /* px-6 py-3 */
    border-radius: var(--radius-lg); /* rounded-lg */
    border: 1px solid transparent;

    /* Typography */
    font-weight: 700;
    font-family: inherit;
    font-size: 1rem;
    line-height: 1.5;

    /* Interaction Defaults */
    cursor: pointer;
    user-select: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

    /* Default Variables (Primary) */
    --btn-bg: var(--color-sunset);
    --btn-text: white;
    --btn-border: transparent;
    --btn-hover-bg: #EA580C; /* Sunset Darker */
    --btn-shadow: 0 4px 14px -2px rgba(249, 115, 22, 0.35);

    background-color: var(--btn-bg);
    color: var(--btn-text);
    border-color: var(--btn-border);
    box-shadow: var(--btn-shadow);

    /* --- VARIANTS --- */

    &[data-variant="primary"] {
      --btn-bg: var(--color-sunset);
      --btn-text: white;
      --btn-hover-bg: #EA580C;
      --btn-shadow: 0 4px 14px -2px rgba(249, 115, 22, 0.35);
    }

    &[data-variant="secondary"] {
      --btn-bg: var(--color-turquoise);
      --btn-text: white;
      --btn-hover-bg: #0284C7; /* Turquoise Darker */
      --btn-shadow: 0 4px 14px -2px rgba(14, 165, 233, 0.35);
    }

    &[data-variant="ghost"] {
      --btn-bg: transparent;
      --btn-text: var(--text-secondary); /* slate-500 */
      --btn-hover-bg: var(--surface-elevated);
      --btn-shadow: none;
      --btn-border: transparent;

      &:hover {
        border-color: var(--border-light);
      }
    }

    &[data-variant="danger"] {
      --btn-bg: #FEF2F2; /* coral-50 equivalent */
      --btn-text: var(--color-coral);
      --btn-border: #FECACA; /* coral-200 equivalent */
      --btn-hover-bg: #FEE2E2; /* coral-100 equivalent */
      --btn-shadow: none;
    }

    /* --- STATES --- */

    &:hover:not(:disabled) {
      background-color: var(--btn-hover-bg);
      transform: translateY(-1px);
    }

    &:active:not(:disabled) {
      transform: scale(0.96);
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
      filter: grayscale(1);

      &:active {
        transform: none;
      }
    }

    /* Focus Visible */
    &:focus-visible {
      outline: 2px solid var(--btn-bg);
      outline-offset: 2px;
    }
  }
</style>
