---
import MainLayout from '../layouts/MainLayout.astro';
---

<MainLayout title="Página no encontrada">
  <div class="min-h-[70vh] flex flex-col items-center justify-center px-4 py-12 text-center">

    <!-- Icon -->
    <div class="w-20 h-20 rounded-3xl bg-primary-50 dark:bg-primary-900/20 flex items-center justify-center mb-6 animate-scale-in">
      <span class="material-symbols-rounded text-4xl text-primary-500" style="font-variation-settings: 'FILL' 1;">wrong_location</span>
    </div>

    <h1 class="text-2xl font-display font-black text-slate-900 dark:text-white mb-2">
      Ruta no encontrada
    </h1>
    <p class="text-sm max-w-xs mx-auto mb-8" style="color: var(--text-secondary);">
      Esta parada no existe en nuestro mapa. Te ayudamos a llegar.
    </p>

    <div class="w-full max-w-xs space-y-3">
      <a href="/home" class="btn-primary btn-lg w-full no-underline">
        <span class="material-symbols-rounded text-lg">explore</span>
        Ir al Inicio
      </a>
      <a href="/rutas" class="btn-secondary btn-lg w-full no-underline">
        <span class="material-symbols-rounded text-lg">route</span>
        Ver todas las rutas
      </a>
    </div>

    <div id="redirect-message" class="hidden mt-8 text-xxs font-bold uppercase tracking-widest animate-pulse-soft" style="color: var(--text-tertiary);">
      Buscando rutas similares…
    </div>
  </div>

  <script>
    const urlPath = window.location.pathname;
    const parts = urlPath.split('/').filter(p => p);

    if (parts.length >= 2 && parts[0] === 'ruta') {
      const potentialId = parts[1];
      const msg = document.getElementById('redirect-message');
      if (msg) msg.classList.remove('hidden');

      setTimeout(() => {
        window.location.replace(`/rutas?search=${encodeURIComponent(potentialId)}`);
      }, 100);
    }
  </script>
</MainLayout>
