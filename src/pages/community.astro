---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Comunidad - Canc√∫nMueve">
	<div class="community-page">
		<div class="header-container">
			<div class="status-pill glass-dark">
				<div class="status-left">
					<div class="status-dot animate-pulse"></div>
					<span class="status-title">Comunidad</span>
				</div>
				<div class="online-count">
					Online: 1.2k
				</div>
			</div>
		</div>

		<div class="filters-scroll no-scrollbar">
			<button class="filter-chip active">Todos</button>
			<button class="filter-chip glass-white">üî¥ Alertas</button>
			<button class="filter-chip glass-white">üöå Rutas</button>
			<button class="filter-chip glass-white">‚≠ê Favoritos</button>
		</div>

		<div class="feed-container no-scrollbar">
			<!-- Post 1 (Alert) -->
			<div class="feed-card glass-white">
				<div class="card-header">
					<div class="user-info">
						<div class="avatar placeholder-avatar"></div>
						<div>
							<p class="user-name">Carlos Ruiz</p>
							<p class="post-time">Hace 5 min</p>
						</div>
					</div>
					<span class="tag alert">üî¥ Alerta</span>
				</div>
				<p class="post-content">
					La Ruta 2 tiene un retraso de 20 minutos por accidente en la Av. Tulum. Sugiero tomar la 5 si pueden.
				</p>
				<div class="card-actions">
					<div class="vote-pill">
						<button class="vote-btn"><span class="material-icons-round">expand_less</span></button>
						<span class="vote-count">42</span>
						<button class="vote-btn down"><span class="material-icons-round">expand_more</span></button>
					</div>
					<button class="comment-btn">
						<span class="material-icons-round icon">chat_bubble_outline</span>
						12 Comentarios
					</button>
				</div>
			</div>

			<!-- Post 2 (Rutas) -->
			<div class="feed-card glass-white">
				<div class="card-header">
					<div class="user-info">
						<div class="avatar placeholder-avatar"></div>
						<div>
							<p class="user-name">Elena G√≥mez</p>
							<p class="post-time">Hace 15 min</p>
						</div>
					</div>
					<span class="tag route">üöå Rutas</span>
				</div>
				<p class="post-content">
					¬°Excelente servicio en la unidad 402! Aire acondicionado funcionando a tope y el conductor muy amable. ‚ùÑÔ∏èüëç
				</p>
				<div class="card-actions">
					<div class="vote-pill">
						<button class="vote-btn active"><span class="material-icons-round">expand_less</span></button>
						<span class="vote-count">128</span>
						<button class="vote-btn"><span class="material-icons-round">expand_more</span></button>
					</div>
					<button class="comment-btn">
						<span class="material-icons-round icon">chat_bubble_outline</span>
						3 Comentarios
					</button>
				</div>
			</div>

			<!-- Post 3 (Info) -->
			<div class="feed-card glass-white">
				<div class="card-header">
					<div class="user-info">
						<div class="avatar-circle">
							<span class="material-icons-round text-slate-400">person</span>
						</div>
						<div>
							<p class="user-name">Anonimo</p>
							<p class="post-time">Hace 1 h</p>
						</div>
					</div>
					<span class="tag info">‚ùì Info</span>
				</div>
				<p class="post-content">
					¬øAlguien sabe si ya restablecieron el servicio hacia Playa Delfines?
				</p>
				<div class="card-actions">
					<div class="vote-pill">
						<button class="vote-btn"><span class="material-icons-round">expand_less</span></button>
						<span class="vote-count">8</span>
						<button class="vote-btn"><span class="material-icons-round">expand_more</span></button>
					</div>
					<button class="comment-btn">
						<span class="material-icons-round icon">chat_bubble_outline</span>
						21 Comentarios
					</button>
				</div>
			</div>

            <div class="spacer-bottom"></div>
		</div>

		<button class="fab-btn">
			<span class="material-icons-round text-3xl font-bold">add</span>
		</button>

		<!-- Bottom Nav -->
		<nav class="bottom-nav">
			<div class="nav-container">
				<a href="/home" class="nav-btn group">
					<span class="material-icons-round nav-icon">home</span>
					<span class="nav-label">Inicio</span>
				</a>
				<a href="/tracking" class="nav-btn group">
					<span class="material-icons-round nav-icon">alt_route</span>
					<span class="nav-label">Rutas</span>
				</a>
                <a href="/community" class="nav-btn group active">
					<span class="material-icons-round nav-icon">groups</span>
					<span class="nav-label">Comunidad</span>
				</a>
				<a href="/tracking" class="nav-btn group">
					<span class="material-icons-round nav-icon">map</span>
					<span class="nav-label">Mapa</span>
				</a>
				<a href="/wallet" class="nav-btn group">
					<span class="material-icons-round nav-icon">credit_card</span>
					<span class="nav-label">Mi Tarjeta</span>
				</a>
			</div>
		</nav>
	</div>
</Layout>

<style>
	.community-page {
		position: relative;
		height: 100vh;
		display: flex;
		flex-direction: column;
		padding-top: 1rem;
		overflow: hidden;
	}

	/* Header */
	.header-container {
		padding: 0 1rem;
		margin-top: 0.5rem;
		z-index: 20;
	}

	.status-pill {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 0.75rem 1.25rem;
		border-radius: 9999px;
		color: white;
		box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
	}

	.glass-dark {
		background: rgba(17, 24, 39, 0.8);
		backdrop-filter: blur(12px);
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	.status-left {
		display: flex;
		align-items: center;
		gap: 0.75rem;
	}

	.status-dot {
		width: 0.5rem;
		height: 0.5rem;
		background-color: #4ADE80; /* green-400 */
		border-radius: 50%;
	}

	.status-title {
		font-weight: 700;
		font-size: 1.125rem;
		letter-spacing: -0.025em;
	}

	.online-count {
		background-color: rgba(255, 255, 255, 0.1);
		padding: 0.25rem 0.75rem;
		border-radius: 9999px;
		font-size: 0.75rem;
		font-weight: 500;
	}

	/* Filters */
	.filters-scroll {
		display: flex;
		gap: 0.5rem;
		overflow-x: auto;
		padding: 1rem;
		z-index: 20;
	}

	.no-scrollbar::-webkit-scrollbar {
		display: none;
	}

    .no-scrollbar {
        scrollbar-width: none;
    }

	.filter-chip {
		padding: 0.5rem 1rem;
		border-radius: 9999px;
		font-size: 0.875rem;
		font-weight: 600;
		white-space: nowrap;
		border: none;
		cursor: pointer;
	}

	.filter-chip.active {
		background-color: var(--color-primary); /* Cyan/Turquoise */
		color: #0F172A;
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
	}

	.glass-white {
		background: rgba(255, 255, 255, 0.7);
		backdrop-filter: blur(16px);
		border: 1px solid rgba(255, 255, 255, 0.4);
	}

    .filter-chip.glass-white {
        color: #1E293B;
    }

	/* Feed */
	.feed-container {
		flex: 1;
		overflow-y: auto;
		padding: 0 1rem 8rem 1rem; /* pb-32 */
		display: flex;
		flex-direction: column;
		gap: 1rem;
		z-index: 10;
	}

	.feed-card {
		border-radius: 1.5rem;
		padding: 1rem;
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
	}

	.card-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 0.75rem;
	}

	.user-info {
		display: flex;
		align-items: center;
		gap: 0.75rem;
	}

	.avatar {
		width: 2.5rem;
		height: 2.5rem;
		border-radius: 50%;
		border: 2px solid var(--color-primary);
	}

    .placeholder-avatar {
        background-color: #E2E8F0;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2394A3B8"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>');
        background-size: cover;
    }

	.avatar-circle {
		width: 2.5rem;
		height: 2.5rem;
		border-radius: 50%;
		background-color: #E2E8F0; /* slate-200 */
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.user-name {
		font-weight: 700;
		font-size: 0.875rem;
		margin: 0;
		color: #1E293B;
	}

	.post-time {
		font-size: 10px;
		opacity: 0.6;
		margin: 0;
		color: #1E293B;
	}

	.tag {
		padding: 0.25rem 0.75rem;
		border-radius: 9999px;
		font-size: 10px;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	.tag.alert {
		background-color: #FEE2E2; /* red-100 */
		color: #DC2626; /* red-600 */
	}

	.tag.route {
		background-color: #DBEAFE; /* blue-100 */
		color: #2563EB; /* blue-600 */
	}

	.tag.info {
		background-color: #FEF3C7; /* amber-100 */
		color: #D97706; /* amber-600 */
	}

	.post-content {
		font-size: 0.875rem;
		line-height: 1.625;
		margin-bottom: 1rem;
		color: #1E293B;
	}

	.card-actions {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	.vote-pill {
		display: flex;
		align-items: center;
		background-color: #F1F5F9; /* slate-100 */
		border-radius: 9999px;
		padding: 0.25rem;
	}

	.vote-btn {
		background: none;
		border: none;
		padding: 0.25rem;
		cursor: pointer;
		display: flex;
		align-items: center;
		justify-content: center;
		color: #64748B;
	}

    .vote-btn:hover {
        color: var(--color-primary);
    }

    .vote-btn.down:hover {
        color: #EF4444;
    }

    .vote-btn.active {
        color: var(--color-primary);
    }

	.vote-count {
		padding: 0 0.5rem;
		font-size: 0.75rem;
		font-weight: 700;
		color: #1E293B;
	}

	.comment-btn {
		display: flex;
		align-items: center;
		gap: 0.375rem;
		font-size: 0.75rem;
		font-weight: 600;
		opacity: 0.7;
		background: none;
		border: none;
		cursor: pointer;
		color: #1E293B;
	}

	.comment-btn .icon {
		font-size: 1.125rem;
	}

    .spacer-bottom {
        height: 6rem;
    }

	/* FAB */
	.fab-btn {
		position: absolute;
		bottom: 6rem;
		right: 1.5rem;
		z-index: 30;
		width: 4rem;
		height: 4rem;
		background-color: var(--color-primary);
		color: #0F172A;
		border-radius: 50%;
		box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
		border: none;
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		transition: transform 0.2s;
	}

	.fab-btn:active {
		transform: scale(0.95);
	}

    .text-3xl { font-size: 1.875rem; }

	/* Bottom Nav */
	.bottom-nav {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background-color: rgba(255, 255, 255, 0.9);
		backdrop-filter: blur(16px);
		border-top: 1px solid #E2E8F0;
		padding-bottom: env(safe-area-inset-bottom);
		padding-top: 0.75rem;
		z-index: 40;
	}

	.nav-container {
		display: flex;
		justify-content: space-between;
		align-items: center;
		max-width: 24rem;
		margin: 0 auto;
        padding: 0 1rem;
	}

	.nav-btn {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 0.25rem;
		background: none;
		border: none;
		cursor: pointer;
		opacity: 0.4;
        color: #0F172A;
		transition: opacity 0.2s;
	}

    .nav-btn.active {
        opacity: 1;
        color: var(--color-primary);
    }

    .nav-btn.active .nav-icon {
         /* Keep primary color */
    }

	.nav-icon {
		font-size: 1.5rem;
	}

	.nav-label {
		font-size: 10px;
		font-weight: 700;
	}

	@keyframes pulse {
		50% { opacity: .5; }
	}

	.animate-pulse {
		animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
	}
</style>
