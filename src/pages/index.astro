---
import MainLayout from '../layouts/MainLayout.astro';
import RouteCalculator from '../islands/RouteCalculator.tsx';
import InteractiveMap from '../islands/InteractiveMap.tsx';

const MAPBOX_TOKEN = import.meta.env.PUBLIC_MAPBOX_TOKEN;
---

<MainLayout title="Inicio">
  <!-- Hero Section -->
  <section class="text-center mb-12 animate-fade-in">
    <h1 class="text-5xl md:text-6xl font-display font-bold text-gray-900 mb-4">
      Encuentra tu <span class="text-primary-500">Ruta</span> en Canc√∫n
    </h1>
    <p class="text-xl text-gray-600 max-w-2xl mx-auto">
      60+ rutas actualizadas, informaci√≥n en tiempo real, y la comunidad m√°s grande
      de transporte p√∫blico en la Riviera Maya.
    </p>
  </section>

  <!-- Route Calculator Island -->
  <section class="max-w-2xl mx-auto mb-12">
    <RouteCalculator client:only="react" />
  </section>

  <!-- Popular Routes (Static SEO Content) -->
  <section class="mb-12">
    <h2 class="text-3xl font-display font-bold text-gray-900 mb-6">
      Rutas M√°s Populares
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="sunny-card p-6 hover:scale-105 transition-transform">
        <div class="flex items-center mb-4">
          <span class="text-3xl mr-3">üöå</span>
          <div>
            <h3 class="font-black text-lg text-deep-navy">Ruta R1</h3>
            <p class="text-sm text-gray-500">Crucero - Zona Hotelera</p>
          </div>
        </div>
        <p class="text-gray-600 text-sm mb-4">
          Conecta el centro de Canc√∫n con toda la Zona Hotelera.
          Ideal para turistas y trabajadores.
        </p>
        <div class="flex items-center justify-between text-sm">
          <span class="text-primary-500 font-bold">$15.00 MXN</span>
          <a href="/ruta/R1" class="premium-button !py-1 !px-3 !text-xs">Ver detalles ‚Üí</a>
        </div>
      </div>

      <div class="sunny-card p-6 hover:scale-105 transition-transform">
        <div class="flex items-center mb-4">
          <span class="text-3xl mr-3">üöå</span>
          <div>
            <h3 class="font-black text-lg text-deep-navy">Ruta R2</h3>
            <p class="text-sm text-gray-500">Puerto Ju√°rez - Centro</p>
          </div>
        </div>
        <p class="text-gray-600 text-sm mb-4">
          Conexi√≥n directa con la terminal de ferrys a Isla Mujeres.
        </p>
        <div class="flex items-center justify-between text-sm">
          <span class="text-primary-500 font-bold">$15.00 MXN</span>
          <a href="/ruta/R2" class="premium-button !py-1 !px-3 !text-xs">Ver detalles ‚Üí</a>
        </div>
      </div>

      <div class="sunny-card p-6 hover:scale-105 transition-transform">
        <div class="flex items-center mb-4">
          <span class="text-3xl mr-3">üöå</span>
          <div>
            <h3 class="font-black text-lg text-deep-navy">Ruta R10</h3>
            <p class="text-sm text-gray-500">Las Am√©ricas - Aeropuerto</p>
          </div>
        </div>
        <p class="text-gray-600 text-sm mb-4">
          La forma m√°s econ√≥mica de llegar al aeropuerto.
        </p>
        <div class="flex items-center justify-between text-sm">
          <span class="text-primary-500 font-bold">$15.00 MXN</span>
          <a href="/ruta/R10" class="premium-button !py-1 !px-3 !text-xs">Ver detalles ‚Üí</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Interactive Map Island -->
  <section class="mb-12">
    <h2 class="text-3xl font-display font-bold text-gray-900 mb-6">
      Mapa Interactivo
    </h2>
    {MAPBOX_TOKEN ? (
      <InteractiveMap client:only="react" mapboxToken={MAPBOX_TOKEN} />
    ) : (
      <div class="sunny-card p-12 text-center bg-gray-50 border-dashed border-2 border-gray-300">
        <p class="text-gray-500 mb-4">Mapbox token missing. Map cannot be initialized.</p>
        <code class="text-xs bg-gray-100 p-2 rounded">PUBLIC_MAPBOX_TOKEN is required in .env</code>
      </div>
    )}
  </section>

  <!-- Stats Section (Static) -->
  <section class="bg-gradient-to-r from-primary-500 to-sky-500 rounded-lg shadow-xl p-8 text-white mb-12">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
      <div>
        <div class="text-4xl font-bold mb-2">60+</div>
        <div class="text-sm opacity-90">Rutas Documentadas</div>
      </div>
      <div>
        <div class="text-4xl font-bold mb-2">247</div>
        <div class="text-sm opacity-90">Paradas Validadas</div>
      </div>
      <div>
        <div class="text-4xl font-bold mb-2">450km¬≤</div>
        <div class="text-sm opacity-90">√Årea de Cobertura</div>
      </div>
      <div>
        <div class="text-4xl font-bold mb-2">2026</div>
        <div class="text-sm opacity-90">Datos Actualizados</div>
      </div>
    </div>
  </section>
</MainLayout>
