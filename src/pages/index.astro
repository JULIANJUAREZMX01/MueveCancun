---
import MainLayout from '../layouts/MainLayout.astro';
import RouteCalculator from '../components/RouteCalculator.astro';
import VerticalHub from '../components/VerticalHub.astro';
---

<MainLayout title="Inicio">
  <VerticalHub />

  <div id="home-content" class="space-y-8 animate-fade-in transition-opacity duration-500">
    <!-- Hero / Greeting -->
    <section id="hero-section" class="text-center pt-6 pb-2 transition-all duration-500">
      <h1 class="text-3xl font-display font-black text-deep-navy tracking-tight mb-2">
        Â¿A dÃ³nde vamos hoy?
      </h1>
      <p class="text-slate-500 font-medium">
        Encuentra la mejor ruta en transporte pÃºblico.
      </p>
    </section>

    <!-- Calculator Widget -->
    <section id="calculator-section" class="transition-all duration-500">
      <RouteCalculator />
    </section>

    <!-- Catalog Link -->
    <section id="catalog-link-section" class="text-center pt-2 transition-all duration-500">
      <a href="/rutas" class="inline-flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-primary-600 transition-colors border-b border-transparent hover:border-primary-600 pb-0.5">
        <span>ðŸšŒ</span> Ver todas las rutas
      </a>
    </section>

    <!-- Promo / Info (Subtle) -->
    <section class="text-center py-8 opacity-60">
      <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">
        Powered by RouteEngineâ„¢ v2.2 WASM
      </p>
    </section>
  </div>

  <script>
    window.addEventListener('VIEW_STATE_CHANGE', (e) => {
        if (e.detail.state === 'map') {
            const content = document.getElementById('home-content');
            // Fade out content to reveal map
            content.classList.add('opacity-0', 'pointer-events-none');
            // Or remove it? Opacity allows transition.
        }
    });

    // Listen for close from Hub to restore view?
    const closeBtn = document.getElementById('hub-close-btn');
    closeBtn?.addEventListener('click', () => {
         const content = document.getElementById('home-content');
         content.classList.remove('opacity-0', 'pointer-events-none');
    });
  </script>
</MainLayout>
